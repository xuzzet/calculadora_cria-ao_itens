<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Calculadora de Fabricação</title>
<style>
  :root{--bg:#14102b;--card:#1d1742;--brand:#a78bfa;--soft:#cec6ff;--text:#fbf9ff}
  *{box-sizing:border-box} body{margin:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;display:flex;min-height:100vh;align-items:center;justify-content:center}
  .wrap{max-width:760px;width:100%;padding:16px} .card{background:var(--card);border:1px solid #40317b;border-radius:18px;box-shadow:0 10px 30px rgba(0,0,0,.35);padding:22px}
  h1{font-size:1.25rem;margin:0 0 10px} .subtitle{color:var(--soft);font-size:.95rem;margin:0 0 18px}
  .grid{display:grid;grid-template-columns:1fr;gap:14px} .row{display:flex;flex-direction:column;gap:8px;min-width:0}
  label{font-size:.9rem;color:#e6e0ff}
  input[type=number]{background:#1a1540;color:var(--text);border:1px solid #4f3fa0;border-radius:12px;padding:12px 14px;font-size:1rem;outline:none;width:100%;max-width:100%;appearance:textfield;-moz-appearance:textfield}
  input[type=number]::-webkit-outer-spin-button,
  input[type=number]::-webkit-inner-spin-button{ -webkit-appearance: none; margin: 0; }
  input[type=number]:focus{border-color:#b8a6ff}
  .btn{background:var(--brand);color:white;border:0;border-radius:12px;padding:12px 16px;font-weight:600;cursor:pointer;width:100%}
  .btn:hover{background:#b399ff}
  .muted{color:var(--soft);font-size:.85rem}
  .result{background:#221b57;border:1px solid #4a3aa6;border-radius:14px;padding:14px}
  .result h3{margin:0 0 10px;font-size:1rem}
  .kpi{display:flex;justify-content:space-between;align-items:baseline;margin:6px 0}
  .kpi span{color:var(--soft);font-size:.9rem} .kpi strong{font-size:1.2rem}
  .formula{margin-top:10px;border-top:1px dashed #4f3fa0;padding-top:10px;font-size:.88rem;color:#eae6ff}
  .foot{display:flex;flex-direction:column;gap:10px;align-items:stretch;margin-top:14px}
  
  /* Responsivo: em telas médias/grandes, volta a duas colunas e footer em linha */
  @media (min-width: 720px){
    .grid{grid-template-columns:1fr 1fr}
    .foot{flex-direction:row;align-items:center;justify-content:space-between}
    .btn{width:auto}
    .wrap{padding:0}
  }
</style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Calculadora de Fabricação</h1>
      <p class="subtitle">Compra = <code>30 tibares × (PM²)</code> • Produção = <code>Compra ÷ 3</code> • Venda = <code>½ Compra + 10%</code></p>

      <div class="grid">
        <div class="row">
          <label for="pm">PM gastos</label>
          <input id="pm" type="number" min="0" step="1" placeholder="Ex: 17">
          <span class="muted">Use inteiros ≥ 0. A fórmula cresce quadraticamente com o PM.</span>
        </div>

        <div class="row">
          <label for="mult">Multiplicador base (tibares por PM²)</label>
          <input id="mult" type="number" min="1" step="1" value="30">
          <span class="muted">Padrão: 30 tibares. Ajuste caso vier a necessidade.</span>
        </div>
      </div>

      <div class="grid" style="margin-top:14px;">
        <div class="result">
          <h3>Resultados</h3>
          <div class="kpi"><span>Valor de compra</span><strong id="compra">—</strong></div>
          <div class="kpi"><span>Produção (⅓ da compra)</span><strong id="producao">—</strong></div>
          <div class="kpi"><span>Venda (½ + 10%)</span><strong id="venda">—</strong></div>
        </div>

        <div class="result">
          <h3>Passo a passo</h3>
          <div class="formula" id="passo1"></div>
          <div class="formula" id="passo2"></div>
          <div class="formula" id="passo3"></div>
        </div>
      </div>

      <div class="foot">
        <span class="muted">Valores em <b>tibares</b>. Arredondamento automático para inteiro.</span>
        <button class="btn" id="btnLimpar">Limpar</button>
      </div>
    </div>
  </div>

<script>
  const pmEl = document.getElementById('pm');
  const multEl = document.getElementById('mult');
  const compraEl = document.getElementById('compra');
  const prodEl = document.getElementById('producao');
  const vendaEl = document.getElementById('venda');
  const p1 = document.getElementById('passo1');
  const p2 = document.getElementById('passo2');
  const p3 = document.getElementById('passo3');

  const fmt = n => `${new Intl.NumberFormat('pt-BR',{maximumFractionDigits:0}).format(Math.round(n))} tibares`;

  function calc(){
    const pm = Math.max(0, Math.floor(Number(pmEl.value) || 0));
    const k  = Math.max(1, Math.floor(Number(multEl.value) || 30));
    const compra   = k * (pm ** 2);
    const producao = compra / 3;
    const venda    = compra * 0.6; // ½ + 10%

    compraEl.textContent = fmt(compra);
    prodEl.textContent   = fmt(producao);
    vendaEl.textContent  = fmt(venda);

    p1.textContent = `Compra = ${k} tibares × (${pm}²) = ${k} × ${pm**2} = ${Math.round(compra)} tibares`;
    p2.textContent = `Produção = 1/3 da compra = ${Math.round(compra)} ÷ 3 = ${Math.round(producao)} tibares`;
    p3.textContent = `Venda = 1/2 da compra + 10% = ${Math.round(compra/2)} + ${Math.round(compra*0.10)} = ${Math.round(venda)} tibares`;
  }

  pmEl.addEventListener('input', calc);
  multEl.addEventListener('input', calc);
  document.getElementById('btnLimpar').addEventListener('click', ()=>{ pmEl.value=''; calc(); });
  calc();
</script>
</body>
</html>
